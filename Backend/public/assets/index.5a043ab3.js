import{d as Ue,r as c,o as K,a as oe,b as v,c as $,u as t,e as C,f as m,w as _,A as Ne,i as E,g as me,h as e,L as Ve,W as Re,j as je,R as ke,F as N,k as X,l as z,m as Q,n as J,p as ae,q as H,s as De,t as I,v as L,x as b,y as B,z as Be,T as Ie,B as Te,C as ge,D as We,E as W,G as le,H as U,I as Le,J as Me,K as T,S as Ce,M as Pe,N as ze,O as se,P as q,Q as He,U as Je,V as Fe,X as Ge,Y as ve,Z as Xe,_ as Se,$ as pe,a0 as fe,a1 as he,a2 as _e,a3 as xe,a4 as ye,a5 as be,a6 as Ze,a7 as qe,a8 as Ye,a9 as Ke,aa as Qe}from"./vendor.894744c1.js";const et=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}};et();function we(D){const l=R();(l.aktiverUser!=null||D)&&localStorage.setItem(l.$id,JSON.stringify(l.$state))}const R=Ue("diveLog",{state:()=>({aktiverUser:{}}),getters:{},actions:{setAktivenUser(D){this.aktiverUser=D,we()},deleteAktivenUser(){this.aktiverUser=null,we(!0)}}}),Z=async()=>{try{return await fetch(window.location.origin,{method:"HEAD"}),!0}catch{return!1}},tt={key:0,class:"flex items-center gap-x-6 bg-divelogBlue py-2.5 px-6 sm:px-3.5 sm:before:flex-1"},st=e("p",{class:"text-sm leading-6 text-white"},[e("a",null,"Du bist offline \u{1F622}")],-1),ot=[st],at=e("div",null,null,-1),lt=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),it={class:"fixed inset-0 z-10 overflow-y-auto"},nt={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},rt={class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-gray-100"},dt={class:"mt-3 text-center sm:mt-5"},ct=X("Ein Update ist verf\xFCgbar"),ut=e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500"}," Es gibt eine neuere Version der App, bitte klicken Sie auf den Button weiter unten um die neueste Version der App herunterzuladen ")],-1),mt={setup(D){let l=c(!1),n=c(!0),i=null;const a=R(),s=async()=>{await(await i.getAll("dives")).forEach(g=>{console.log(g),g.new&&(delete g.new,delete g.d_ID,z.post(`http://localhost:3000/addDive/${a.aktiverUser.u_id}`,g))})},u=async()=>{i=await Q("divesDB",1,{upgrade(p){p.createObjectStore("dives",{keyPath:"d_ID"})}})};K(async()=>{window.indexedDB||alert("IndexedDB is not available!"),localStorage.getItem(a.$id)&&(a.$state=JSON.parse(localStorage.getItem(a.$id))),n.value=await Z(),window.addEventListener("online",()=>{n.value=!0,s()}),window.addEventListener("offline",()=>{n.value=!1,navigator.vibrate(200)});const p=await navigator.serviceWorker.getRegistration();if(!p){console.log("registration failed!");return}p.addEventListener("updatefound",()=>l.value=!0),p.waiting&&(l.value=!0),window.indexedDB||alert("IndexedDB is not available!"),i||await u(),n.value==!0&&await s()});const d=async()=>{var g;n.value=await Z(),window.addEventListener("online",()=>n.value=!0),window.addEventListener("offline",()=>n.value=!1);const p=await navigator.serviceWorker.getRegistration();p&&((g=p.waiting)==null||g.postMessage({type:"SKIP_WAITING"})),window.location.reload()};return(p,g)=>{const x=oe("CloudDownloadIcon");return v(),$(N,null,[t(n)?C("",!0):(v(),$("div",tt,ot)),at,m(t(je),{as:"template",show:t(l)},{default:_(()=>[m(t(Ne),{as:"div",class:"relative z-10",onClose:g[0]||(g[0]=f=>E(l)?l.value=!0:l=!0)},{default:_(()=>[m(t(me),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:_(()=>[lt]),_:1}),e("div",it,[e("div",nt,[m(t(me),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:_(()=>[m(t(Ve),{class:"relative transform overflow-hidden rounded-lg bg-white px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-sm sm:p-6"},{default:_(()=>[e("div",null,[e("div",rt,[m(x,{class:"h-6 w-6 text-divelogBlue","aria-hidden":"true"})]),e("div",dt,[m(t(Re),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:_(()=>[ct]),_:1}),ut])]),e("div",{class:"mt-5 sm:mt-6"},[e("button",{type:"button",class:"inline-flex w-full justify-center rounded-md border border-transparent bg-divelogBlue px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-divelogDarkBlue sm:text-sm",onClick:d}," Update App ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),e("div",null,[m(t(ke))])],64)}}},gt={setup(D){return(l,n)=>(v(),$("div",null,[m(t(ke))]))}},vt={class:"min-h-full bg-white px-4 py-16 sm:px-6 sm:py-24 md:grid md:place-items-center lg:px-8"},pt={class:"mx-auto max-w-max"},ft={class:"sm:flex"},ht=e("p",{class:"text-4xl font-bold tracking-tight text-lime-500 sm:text-5xl"},"404",-1),_t={class:"sm:ml-6"},xt=e("div",{class:"sm:border-l sm:border-gray-200 sm:pl-6"},[e("h1",{class:"text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl"}," Page not found "),e("p",{class:"mt-1 text-base text-gray-500"}," Please check the URL in the address bar and try again. ")],-1),yt={class:"mt-10 flex space-x-3 sm:border-l sm:border-transparent sm:pl-6"},bt={setup(D){const l=J();return(n,i)=>(v(),$("div",vt,[e("div",pt,[e("main",ft,[ht,e("div",_t,[xt,e("div",yt,[e("a",{onClick:i[0]||(i[0]=a=>t(l).push("/")),class:"inline-flex items-center rounded-md border border-transparent bg-lime-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-lime-600 focus:outline-none focus:ring-2 focus:ring-lime-500 focus:ring-offset-2"},"Go back home"),e("a",{onClick:i[1]||(i[1]=a=>t(l).push("/contact")),class:"inline-flex items-center rounded-md border border-transparent bg-lime-100 px-4 py-2 text-sm font-medium text-lime-600 hover:bg-lime-200 focus:outline-none focus:ring-2 focus:ring-lime-500 focus:ring-offset-2"},"Contact support")])])])])]))}};var Y="/diver-svgrepo-com.svg";const wt={class:"min-h-full flex flex-col justify-center py-12 sm:px-6 lg:px-8"},$t=e("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[e("img",{class:"mx-auto h-20 w-auto",src:Y,alt:"Dive Log Icon"}),e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"Login")],-1),kt={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},Dt={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},Bt={class:"space-y-6",action:"#",method:"POST"},It=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Email ",-1),Lt={class:"mt-1"},Ct={key:0,class:"mt-2 text-sm text-diveRed",id:"email-error"},St=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Password ",-1),Et={class:"mt-1"},Ot={key:0,class:"mt-2 text-sm text-diveRed",id:"email-error"},At=e("hr",null,null,-1),Ut={class:"flex items-center justify-between"},Nt={class:"text-sm"},Vt={setup(D){const l=R(),n=J();let i=c(!1);c(!1),c(!1),c(""),c(null),c(!1);let a=ae({email:"",password:""});const s=H(()=>({email:{required:B,email:Be},password:{required:B}})),u=De(s,a);async function d(p){console.log("LOGIN"),p.preventDefault();try{if(u.value.$validate(),u.value.$error)console.log("Fehler");else{//! Login mit Server bauen
l.setAktivenUser({u_id:3,vorname:"Lukas",nachname:"Semler",email:"lukas.semler@gmail.com",passwort:"LukasPW",strasse:"Venusweg",hnr:"11",plz:"1140",stadt:"Wien"}),console.log(l.aktiverUser),n.push("/home")}p.preventDefault()}catch(g){p.preventDefault(),console.log(g.message),i.value=!0,setTimeout(()=>{i.value=!1},5e3)}finally{p.preventDefault()}}return H(()=>u.value.$invalid==!0),(p,g)=>(v(),$("div",wt,[$t,e("div",kt,[e("div",Dt,[e("form",Bt,[e("div",null,[It,e("div",Lt,[I(e("input",{"onUpdate:modelValue":g[0]||(g[0]=x=>t(a).email=x),id:"email",name:"email",type:"email",autocomplete:"email",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-divelogBlue focus:border-divelogBlue sm:text-sm"},null,512),[[L,t(a).email]]),t(u).email.$invalid?(v(),$("p",Ct,b(t(u).email.$silentErrors[0].$message),1)):C("",!0)])]),e("div",null,[St,e("div",Et,[I(e("input",{"onUpdate:modelValue":g[1]||(g[1]=x=>t(a).password=x),id:"password",name:"password",type:"password",autocomplete:"current-password",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-divelogBlue focus:border-divelogBlue sm:text-sm"},null,512),[[L,t(a).password]]),t(u).password.$invalid?(v(),$("p",Ot,b(t(u).password.$silentErrors[0].$message),1)):C("",!0)])]),At,e("div",Ut,[e("div",Nt,[e("a",{onClick:g[2]||(g[2]=x=>t(n).push("/register")),class:"font-medium text-divelogBlue hover:text-chsDarkBlue underline hover:cursor-pointer"}," Create an Account ")])]),e("div",null,[e("button",{onClick:d,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-divelogBlue hover:bg-divelogDarkBlue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-divelogBlue"}," Sign in ")])])])])]))}},Rt={"aria-live":"assertive",class:"fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start z-40"},jt={class:"w-full flex flex-col items-center space-y-4 sm:items-end"},Tt={key:0,class:"max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden"},Wt={class:"p-4"},Mt={class:"flex items-start"},Pt={class:"flex-shrink-0"},zt=e("div",{class:"ml-3 w-0 flex-1 pt-0.5"},[e("p",{class:"text-sm font-medium text-gray-900"},"Error"),e("p",{class:"mt-1 text-sm text-gray-500"}," Es gibt bereits einen User mit dieser Email-Adresse, bitte verwenden Sie eine andere ")],-1),Ht={class:"ml-4 flex-shrink-0 flex"},Jt=e("span",{class:"sr-only"},"Close",-1),Ft={class:"min-h-full flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Gt=e("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[e("img",{class:"mx-auto h-12 w-auto",src:Y,alt:"Dive Log Icon"}),e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"Register")],-1),Xt={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-3xl"},Zt={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},qt={class:"space-y-6"},Yt={class:"grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-4"},Kt=e("label",{for:"first-name",class:"block text-sm font-medium text-gray-700"},"Firstname",-1),Qt={class:"mt-1"},es={key:0,class:"mt-2 text-sm text-diveRed",id:"email-error"},ts=e("label",{for:"last-name",class:"block text-sm font-medium text-gray-700"},"Lastname",-1),ss={class:"mt-1"},os={key:0,class:"mt-2 text-sm text-diveRed",id:"email-error"},as={class:"sm:col-span-2"},ls=e("label",{for:"company",class:"block text-sm font-medium text-gray-700"},"Email",-1),is={class:"mt-1"},ns={key:0,class:"mt-2 text-sm text-diveRed",id:"email-error"},rs={class:"sm:col-span-2"},ds=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1),cs={class:"mt-1"},us={key:0,class:"mt-2 text-sm text-diveRed",id:"email-error"},ms={class:"sm:col-span-2"},gs=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},"Repeat Password",-1),vs={class:"mt-1"},ps={key:0,class:"mt-2 text-sm text-diveRed",id:"email-error"},fs={class:"flex items-center justify-between"},hs={class:"text-sm"},_s={setup(D){const l=J();let n=c(!1),i=c(!1);c(null),c(null),c(null);let a=c("");const s=ae({vorname:"",nachname:"",email:"",strasse_hnr:"",stadt:"",plz:"",password:"",c_password:""});ae({char1:"",char2:"",char3:"",char4:"",char5:"",char6:""});const u=H(()=>({vorname:{required:B},nachname:{required:B},email:{required:B,email:Be},strasse_hnr:{required:B},stadt:{required:B},plz:{required:B,numeric:Te},password:{required:B,minLength:ge(6)},c_password:{required:B,minLength:ge(6),sameAs:We(s.password)}}));H(()=>({char1:{required:B},char2:{required:B},char3:{required:B},char4:{required:B},char5:{required:B},char6:{required:B}}));const d=De(u,s);async function p(x){x.preventDefault();try{if(d.value.$validate(),d.value.$error)console.log("Nicht alle Felder ausgef\xFCllt");else{console.log("sucess");const{data:f}=await z.post("/sendCodeRegister",{vorname:s.vorname,nachname:s.nachname,email:s.email});a.value=f,console.log("Code: ",a.value),i.value=!0,OTPInput()}x.preventDefault()}catch(f){x.preventDefault(),console.log(f.message),n.value=!0,setTimeout(()=>{n.value=!1},5e3),g()}finally{x.preventDefault()}}function g(){s.vorname="",s.nachname="",s.email="",s.strasse_hnr="",s.stadt="",s.plz="",s.telefon="",s.password="",s.c_password=""}return(x,f)=>{const w=oe("XCircleIcon"),y=oe("XIcon");return v(),$(N,null,[e("div",Rt,[e("div",jt,[m(Ie,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:_(()=>[t(n)?(v(),$("div",Tt,[e("div",Wt,[e("div",Mt,[e("div",Pt,[m(w,{class:"h-6 w-6 text-red-500","aria-hidden":"true"})]),zt,e("div",Ht,[e("button",{onClick:f[0]||(f[0]=h=>E(n)?n.value=!1:n=!1),class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2"},[Jt,m(y,{class:"h-5 w-5","aria-hidden":"true"})])])])])])):C("",!0)]),_:1})])]),e("div",Ft,[Gt,e("div",Xt,[e("div",Zt,[e("form",qt,[e("div",null,[e("div",null,[e("div",Yt,[e("div",null,[Kt,e("div",Qt,[I(e("input",{"onUpdate:modelValue":f[1]||(f[1]=h=>t(s).vorname=h),type:"text",id:"first-name",name:"first-name",autocomplete:"given-name",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-divelogBlue focus:border-divelogBlue sm:text-sm"},null,512),[[L,t(s).vorname]]),t(d).vorname.$invalid?(v(),$("p",es,b(t(d).vorname.$silentErrors[0].$message),1)):C("",!0)])]),e("div",null,[ts,e("div",ss,[I(e("input",{"onUpdate:modelValue":f[2]||(f[2]=h=>t(s).nachname=h),type:"text",id:"last-name",name:"last-name",autocomplete:"family-name",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-divelogBlue focus:border-divelogBlue sm:text-sm"},null,512),[[L,t(s).nachname]]),t(d).nachname.$invalid?(v(),$("p",os,b(t(d).nachname.$silentErrors[0].$message),1)):C("",!0)])]),e("div",as,[ls,e("div",is,[I(e("input",{"onUpdate:modelValue":f[3]||(f[3]=h=>t(s).email=h),type:"email",name:"email",id:"email",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-divelogBlue focus:border-divelogBlue sm:text-sm"},null,512),[[L,t(s).email]]),t(d).email.$invalid?(v(),$("p",ns,b(t(d).email.$silentErrors[0].$message),1)):C("",!0)])]),e("div",rs,[ds,e("div",cs,[I(e("input",{"onUpdate:modelValue":f[4]||(f[4]=h=>t(s).password=h),type:"password",name:"password",id:"password",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-divelogBlue focus:border-divelogBlue sm:text-sm"},null,512),[[L,t(s).password]]),t(d).password.$invalid?(v(),$("p",us,b(t(d).password.$silentErrors[0].$message),1)):C("",!0)])]),e("div",ms,[gs,e("div",vs,[I(e("input",{"onUpdate:modelValue":f[5]||(f[5]=h=>t(s).c_password=h),type:"password",name:"c_password",id:"c_password",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-divelogBlue focus:border-divelogBlue sm:text-sm"},null,512),[[L,t(s).c_password]]),t(d).c_password.$invalid?(v(),$("p",ps,b(t(d).c_password.$silentErrors[0].$message),1)):C("",!0)])])])])]),e("div",fs,[e("div",hs,[e("a",{onClick:f[6]||(f[6]=h=>t(l).push("/")),class:"font-medium text-divelogBlue hover:text-diveDarkBlue underline hover:cursor-pointer"}," To Login ")])]),e("div",null,[e("button",{onClick:p,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-divelogBlue hover:bg-diveDarkBlue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-divelogBlue"}," Register ")])])])])])],64)}}},xs={class:"m-4"},ys=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Your stats:",-1),bs={class:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-3"},ws={class:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6"},$s=e("dt",{class:"truncate text-sm font-medium text-gray-500"},"Total Dives",-1),ks={class:"mt-1 text-3xl font-semibold tracking-tight text-gray-900"},Ds={class:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6"},Bs=e("dt",{class:"truncate text-sm font-medium text-gray-500"},"Total Divetime",-1),Is={class:"mt-1 text-3xl font-semibold tracking-tight text-gray-900"},Ls=e("br",null,null,-1),Cs=e("hr",null,null,-1),Ss=e("h1",{class:"text-center text-3xl font-bold my-4"},"All your Dives",-1),Es=e("div",{id:"map",style:{height:"300px"}},null,-1),Os=e("br",null,null,-1),As=e("hr",null,null,-1),Us=e("br",null,null,-1),Ns={class:"px-4 sm:px-6 lg:px-8 m-4"},Vs={class:"sm:flex sm:items-center"},Rs=e("div",{class:"sm:flex-auto"},[e("h1",{class:"text-xl font-semibold text-gray-900"},"Dives"),e("p",{class:"mt-2 text-sm text-gray-700"},"Here you can see a list of all your dives.")],-1),js={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Ts={class:"mt-8 flex flex-col"},Ws={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},Ms={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},Ps={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},zs={class:"min-w-full divide-y divide-gray-300"},Hs=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," NR. "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Title "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Date ")])],-1),Js={class:"bg-white"},Fs=["onClick"],Gs={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},Xs={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-900"},Zs={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-900"},qs={setup(D){let l=c(null),n=c("pk.eyJ1IjoibHVrYXNzZW1sZXIiLCJhIjoiY2xlZTM3MzlyMDVuODN0b2NueWQ1OHNpZyJ9.NboOeOXWIhK0vucp7B9A5w"),i="mapbox://styles/lukassemler/clbaoba0t007t14nt6n0qujvl";const a=J(),s=R();let u=c([]);const d=c(!0);let p=null;const g=async()=>{if(!d.value){let y=await p.getAll("dives");u.value=y;return}try{const{data:y}=await z.get(`http://localhost:3000/dives/${s.aktiverUser.u_id}`);console.log(y),u.value=y,await p.clear("dives"),u.value.forEach(h=>{p.put("dives",Le(h))})}catch(y){console.error(y),d.value=!1,g()}},x=async()=>{p=await Q("divesDB",1,{upgrade(y){y.createObjectStore("dives",{keyPath:"d_ID"})}})};K(async()=>{d.value=await Z(),window.addEventListener("online",()=>{d.value=!0}),window.addEventListener("offline",()=>{d.value=!1,navigator.vibrate(200)}),await x(),await g(),l.value=new W.Map({container:"map",style:i,accessToken:n.value,center:[14,50],zoom:1});for(const y of u.value){const h=JSON.parse(y.coords);new W.Marker({anchor:"center",color:"#03C7FC"}).setLngLat([h[0],h[1]]).addTo(l.value)}});const f=H(()=>{let y=0;return u.value.forEach(h=>{y+=h.diveTime}),y});function w(y){console.log(y.d_ID),a.push(`/diveDetail/${y.d_ID}`)}return(y,h)=>(v(),$(N,null,[e("div",xs,[ys,e("dl",bs,[e("div",ws,[$s,e("dd",ks,b(t(u).length),1)]),e("div",Ds,[Bs,e("dd",Is,b(t(f))+"min ",1)])])]),Ls,Cs,Ss,Es,Os,As,Us,e("div",Ns,[e("div",Vs,[Rs,e("div",js,[e("button",{onClick:h[0]||(h[0]=k=>t(a).push("/addDive")),type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent bg-divelogBlue px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto"}," Add Dive ")])]),e("div",Ts,[e("div",Ws,[e("div",Ms,[e("div",Ps,[e("table",zs,[Hs,e("tbody",Js,[(v(!0),$(N,null,le(t(u),(k,O)=>(v(),$("tr",{key:O,class:U(O%2===0?void 0:"bg-gray-50"),onClick:V=>w(k)},[e("td",Gs,b(k.nr),1),e("td",Xs,b(k.title),1),e("td",Zs,b(new Date(k.date).getDate())+"."+b(new Date(k.date).getMonth()+1)+"."+b(new Date(k.date).getFullYear()),1)],10,Fs))),128))])])])])])])])],64))}},Ys={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},Ks={class:"flex h-16 justify-between"},Qs=e("div",{class:"flex"},[e("div",{class:"flex flex-shrink-0 items-center"},[e("img",{class:"block h-8 w-auto lg:hidden",src:Y,alt:"DiveLog"}),e("img",{class:"hidden h-8 w-auto lg:block",src:Y,alt:"DiveLog"})]),e("div",{class:"hidden sm:ml-6 sm:flex sm:space-x-8"},[e("a",{href:"#",class:"inline-flex items-center border-b-2 border-diveLogBlue px-1 pt-1 text-sm font-medium text-gray-900"},"Home"),e("a",{href:"#",class:"inline-flex items-center border-b-2 border-transparent px-1 pt-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"},"Log Dive")])],-1),eo={class:"hidden sm:ml-6 sm:flex sm:items-center"},to=e("div",null,null,-1),so={class:"-mr-2 flex items-center sm:hidden"},oo=e("span",{class:"sr-only"},"Open main menu",-1),ao={class:"space-y-1 pt-2 pb-3"},lo=X("Home"),io=X("Log Dive"),no={class:"border-t border-gray-200 pt-4 pb-3"},ro=e("div",{class:"flex items-center px-4"},[e("div",{class:"ml-3"})],-1),co={class:"mt-3 space-y-1"},uo=X("Sign out"),mo=e("h1",{class:"text-center font-bold text-4xl mt-4"},"Home",-1),go=e("br",null,null,-1),vo=e("div",null,"LOADING...",-1),po={setup(D){const l=R(),n=J();function i(){l.deleteAktivenUser(),n.push("/")}return(a,s)=>(v(),$(N,null,[m(t(Me),{as:"nav",class:"bg-white shadow"},{default:_(({open:u})=>[e("div",Ys,[e("div",Ks,[Qs,e("div",eo,[m(t(Pe),{as:"div",class:"relative ml-3"},{default:_(()=>[to,m(Ie,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:_(()=>[m(t(ze),{class:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:_(()=>[m(t(se),null,{default:_(({active:d})=>[e("a",{href:"#",class:U([d?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},"Your Profil",2)]),_:1}),m(t(se),null,{default:_(({active:d})=>[e("a",{href:"#",class:U([d?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},"Settings",2)]),_:1}),m(t(se),null,{default:_(({active:d})=>[e("a",{onClick:i,class:U([d?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},"Sign out",2)]),_:1})]),_:1})]),_:1})]),_:1})]),e("div",so,[m(t(q),{class:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-diveLogBlue"},{default:_(()=>[oo,u?(v(),T(t(Je),{key:1,class:"block h-6 w-6","aria-hidden":"true"})):(v(),T(t(He),{key:0,class:"block h-6 w-6","aria-hidden":"true"}))]),_:2},1024)])])]),m(t(Fe),{class:"sm:hidden"},{default:_(()=>[e("div",ao,[m(t(q),{as:"a",href:"#",class:"block border-l-4 border-diveLogBlue bg-gray-100 py-2 pl-3 pr-4 text-base font-medium text-divelogBlue"},{default:_(()=>[lo]),_:1}),m(t(q),{as:"a",onClick:s[0]||(s[0]=d=>t(n).push("/addDive")),class:"block border-l-4 border-transparent py-2 pl-3 pr-4 text-base font-medium text-gray-500 hover:border-gray-300 hover:bg-gray-50 hover:text-gray-700"},{default:_(()=>[io]),_:1})]),e("div",no,[ro,e("div",co,[m(t(q),{onClick:i,as:"a",class:"block px-4 py-2 text-base font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-800"},{default:_(()=>[uo]),_:1})])])]),_:1})]),_:1}),e("div",null,[mo,go,(v(),T(Ce,null,{fallback:_(()=>[vo]),default:_(()=>[m(qs)]),_:1}))])],64))}},fo=e("h1",{class:"text-center text-3xl font-bold mt-4"},"Log Dive",-1),ho={class:"space-y-8 divide-y divide-gray-200 m-4"},_o={class:"space-y-8 divide-y divide-gray-200"},xo={class:"pt-8"},yo=e("div",null,[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"General Information"),e("p",{class:"mt-1 text-sm text-gray-500"}," Here you can add general Information of the Dive. ")],-1),bo={class:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6"},wo={class:"sm:col-span-3"},$o=e("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Title",-1),ko={class:"mt-1"},Do={class:"sm:col-span-3"},Bo=e("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1),Io={class:"mt-1"},Lo={class:"sm:col-span-4"},Co=e("label",{for:"Country",class:"block text-sm font-medium text-gray-700"},"Country",-1),So={class:"mt-1"},Eo={class:"sm:col-span-4"},Oo=e("label",{for:"divesite",class:"block text-sm font-medium text-gray-700"},"Divesite",-1),Ao={class:"mt-1"},Uo=e("p",{class:"my-3 text-gray-500"},"or pick your current location",-1),No=e("br",null,null,-1),Vo=e("div",{class:"mt-5"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Specific Information"),e("p",{class:"mt-1 text-sm text-gray-500"}," Here you can add specific Information of the Dive like depth and time. ")],-1),Ro={class:"mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6"},jo={class:"sm:col-span-3"},To=e("label",{for:"depth",class:"block text-sm font-medium text-gray-700"},"Max. Depth",-1),Wo={class:"mt-1"},Mo={class:"sm:col-span-3"},Po=e("label",{for:"time",class:"block text-sm font-medium text-gray-700"},"Dive Time",-1),zo={class:"mt-1"},Ho={class:"sm:col-span-3"},Jo=e("label",{for:"airIn",class:"block text-sm font-medium text-gray-700"},"Air In",-1),Fo={class:"mt-1"},Go={class:"sm:col-span-3"},Xo=e("label",{for:"airOut",class:"block text-sm font-medium text-gray-700"},"Air Our",-1),Zo={class:"mt-1"},qo={class:"flex flex-row"},Yo={class:"flex flex-col w-full"},Ko=X("Type of Air"),Qo={class:"relative mt-1"},ea={class:"sm:col-span-3"},ta=e("label",{for:"weight",class:"block text-sm font-medium text-gray-700"},"Weight (kg)",-1),sa={class:"mt-1"},oa={class:"flex flex-row"},aa={class:"flex flex-col w-full"},la=X("Suit"),ia={class:"relative mt-1"},na={class:"pt-8"},ra=e("div",null,[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Memories"),e("p",{class:"mt-1 text-sm text-gray-500"}," Here you can upload the beste Image from the dive ")],-1),da={class:"sm:col-span-2"},ca=e("label",{for:"cover-photo",class:"block text-sm font-medium text-gray-700"}," Image ",-1),ua={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},ma={key:0,class:"space-y-1 text-center"},ga=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),va={class:"flex text-sm text-gray-600"},pa={for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium text-divelogBlue hover:text-divelogBlue focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-divelogBlue"},fa=e("span",null,"Upload a file",-1),ha=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1),_a={key:1},xa={class:"flex justify-center"},ya=["src"],ba={key:0,class:"flex justify-center"},wa={class:"pt-5"},$a={class:"flex justify-end"},ka={setup(D){const l=J(),n=R(),i=c(!0);let a=null,s=c(null),u=c("pk.eyJ1IjoibHVrYXNzZW1sZXIiLCJhIjoiY2xlZTM3MzlyMDVuODN0b2NueWQ1OHNpZyJ9.NboOeOXWIhK0vucp7B9A5w"),d="mapbox://styles/lukassemler/clbaoba0t007t14nt6n0qujvl",p=c("0px"),g=c(""),x=c(null),f=c(""),w=c(""),y=c(null),h=c(null),k=c(null),O=c(null),V=c(null),j=c(null),M=c(null);const ne=[{id:1,name:"Without"},{id:2,name:"Shorty"},{id:3,name:"3mm"},{id:4,name:"5mm"},{id:5,name:"7mm"},{id:6,name:"Semi-Dry"},{id:7,name:"Dry"}],ee=c(""),F=c(null),re=H(()=>ee.value===""?ne:ne.filter(S=>S.name.toLowerCase().includes(ee.value.toLowerCase()))),de=[{id:1,name:"Air"},{id:2,name:"EANx 30"},{id:3,name:"EANx 31"},{id:4,name:"EANx 32"},{id:5,name:"EANx 33"}],te=c(""),G=c(null),ce=H(()=>te.value===""?de:de.filter(S=>S.name.toLowerCase().includes(te.value.toLowerCase())));async function Ee(){let S=()=>new Promise(function(A,P){navigator.geolocation.getCurrentPosition(A,P)}),{coords:{latitude:r,longitude:o}}=await S();y.value=[o,r],console.log(r,o),p.value="300px",W.accessToken=u.value,s.value=await new W.Map({container:"map",style:d,center:[o,r],zoom:13}),new W.Marker({anchor:"center",color:"#03C7FC"}).setLngLat([o,r]).addTo(s.value)}async function Oe(S){let r=new FileReader;r.addEventListener("load",async A=>{console.log(A),M.value=A.target.result});let o=await Xe(document.querySelector("#file-upload").files[0],{maxSizeMB:.004,maxWidthOrHeight:1920,useWebWorker:!0});r.readAsDataURL(o)}async function ue(S){if(S.preventDefault(),!i.value){const r=await a.getAll("dives");console.log("aaaaaaaaaaa"),console.log(r),y.value?await a.put("dives",Le({new:!0,d_ID:r.length+2,title:g.value,date:x.value,country:f.value,divesite:w.value,depth:h.value,airIn:O.value,airOut:V.value,weight:j.value,air:G.value.name,suit:F.value.name,coords:y.value,time:k.value})):await a.put("dives",{new:!0,d_ID:r.length+2,title:g.value,date:x.value,country:f.value,divesite:w.value,depth:h.value,airIn:O.value,airOut:V.value,weight:j.value,air:G.value.name,suit:F.value.name,coords:null,time:k.value}),l.go(-1);return}if(y.value)try{await z.post(`http://localhost:3000/addDive/${n.aktiverUser.u_id}`,{title:g.value,date:x.value,country:f.value,divesite:w.value,depth:h.value,airIn:O.value,airOut:V.value,weight:j.value,air:G.value.name,suit:F.value.name,coords:y.value,time:k.value}),l.go(-1)}catch{console.log("Error")}else try{await z.post(`http://localhost:3000/addDive/${n.aktiverUser.u_id}`,{title:g.value,date:x.value,country:f.value,divesite:w.value,depth:h.value,airIn:O.value,airOut:V.value,weight:j.value,air:G.value.name,suit:F.value.name,coords:null,time:k.value}),l.go(-1)}catch{console.log("Error"),i.value=!1,ue(S)}}const Ae=async()=>{a=await Q("divesDB",1,{upgrade(S){S.createObjectStore("dives",{keyPath:"d_ID"})}}),console.log(a)};return K(async()=>{i.value=await Z(),window.addEventListener("online",()=>{i.value=!0}),window.addEventListener("offline",()=>{i.value=!1,navigator.vibrate(200)}),await Ae()}),(S,r)=>(v(),$(N,null,[e("button",{type:"button",class:"inline-flex items-center rounded-full border border-transparent bg-divelogBlue p-2 text-white shadow-sm hover:bg-divelogDarkBlue focus:outline-none focus:ring-2 focus:ring-divelogBlue focus:ring-offset-2 m-4",onClick:r[0]||(r[0]=o=>t(l).go(-1))},[m(t(Se),{class:"h-6 w-6","aria-hidden":"true"})]),fo,e("form",ho,[e("div",_o,[e("div",xo,[yo,e("div",bo,[e("div",wo,[$o,e("div",ko,[I(e("input",{type:"text",name:"title",id:"title",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-divelogBlue focus:ring-divelogBlue sm:text-sm","onUpdate:modelValue":r[1]||(r[1]=o=>E(g)?g.value=o:g=o)},null,512),[[L,t(g)]])])]),e("div",Do,[Bo,e("div",Io,[I(e("input",{type:"date",name:"date",id:"date",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-divelogBlue focus:ring-divelogBlue sm:text-sm","onUpdate:modelValue":r[2]||(r[2]=o=>E(x)?x.value=o:x=o)},null,512),[[L,t(x)]])])]),e("div",Lo,[Co,e("div",So,[I(e("input",{id:"country",name:"country",type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-divelogBlue focus:ring-divelogBlue sm:text-sm","onUpdate:modelValue":r[3]||(r[3]=o=>E(f)?f.value=o:f=o)},null,512),[[L,t(f)]])])]),e("div",Eo,[Oo,e("div",Ao,[I(e("input",{id:"divesite",name:"divesite",type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-divelogBlue focus:ring-divelogBlue sm:text-sm","onUpdate:modelValue":r[4]||(r[4]=o=>E(w)?w.value=o:w=o)},null,512),[[L,t(w)]])]),Uo,e("div",{class:"flex flex-row justify-center"},[e("button",{type:"button",class:"mt-4 inline-flex items-center rounded-md border border-transparent bg-divelogBlue px-3 py-2 text-sm font-medium leading-4 text-white shadow-sm hover:bg-divelogDarkBlue focus:outline-none focus:ring-2 focus:ring-divelogBlue focus:ring-offset-2",onClick:Ee}," Get current location ")]),No,e("div",{style:Ge(`height: ${t(p)}`),id:"map"},null,4)])])]),e("div",null,[Vo,e("div",Ro,[e("div",jo,[To,e("div",Wo,[I(e("input",{type:"number",name:"depth",id:"depth",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-divelogBlue focus:ring-divelogBlue sm:text-sm","onUpdate:modelValue":r[5]||(r[5]=o=>E(h)?h.value=o:h=o)},null,512),[[L,t(h)]])])]),e("div",Mo,[Po,e("div",zo,[I(e("input",{type:"number",name:"time",id:"time",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-divelogBlue focus:ring-divelogBlue sm:text-sm","onUpdate:modelValue":r[6]||(r[6]=o=>E(k)?k.value=o:k=o)},null,512),[[L,t(k)]])])]),e("div",Ho,[Jo,e("div",Fo,[I(e("input",{type:"number",name:"airIn",id:"airIn",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-divelogBlue focus:ring-divelogBlue sm:text-sm","onUpdate:modelValue":r[7]||(r[7]=o=>E(O)?O.value=o:O=o)},null,512),[[L,t(O)]])])]),e("div",Go,[Xo,e("div",Zo,[I(e("input",{type:"number",name:"airOut",id:"airOut",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-divelogBlue focus:ring-divelogBlue sm:text-sm","onUpdate:modelValue":r[8]||(r[8]=o=>E(V)?V.value=o:V=o)},null,512),[[L,t(V)]])])]),e("div",qo,[e("div",Yo,[m(t(ve),{as:"div",modelValue:G.value,"onUpdate:modelValue":r[10]||(r[10]=o=>G.value=o)},{default:_(()=>[m(t(pe),{class:"block text-sm font-medium text-gray-700"},{default:_(()=>[Ko]),_:1}),e("div",Qo,[m(t(fe),{class:"w-full rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 shadow-sm focus:border-divelogBlue focus:outline-none focus:ring-1 focus:ring-divelogBlue sm:text-sm",onChange:r[9]||(r[9]=o=>te.value=o.target.value),"display-value":o=>o==null?void 0:o.name},null,8,["display-value"]),m(t(he),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:_(()=>[m(t(_e),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1}),t(ce).length>0?(v(),T(t(xe),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:_(()=>[(v(!0),$(N,null,le(t(ce),o=>(v(),T(t(ye),{key:o.id,value:o,as:"template"},{default:_(({active:A,selected:P})=>[e("li",{class:U(["relative cursor-default select-none py-2 pl-3 pr-9",A?"bg-divelogBlue text-white":"text-gray-900"])},[e("span",{class:U(["block truncate",P&&"font-semibold"])},b(o.name),3),P?(v(),$("span",{key:0,class:U(["absolute inset-y-0 right-0 flex items-center pr-4",A?"text-white":"text-divelogBlue"])},[m(t(be),{class:"h-5 w-5","aria-hidden":"true"})],2)):C("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):C("",!0)])]),_:1},8,["modelValue"])])]),e("div",ea,[ta,e("div",sa,[I(e("input",{type:"number",name:"weight",id:"weight",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-divelogBlue focus:ring-divelogBlue sm:text-sm","onUpdate:modelValue":r[11]||(r[11]=o=>E(j)?j.value=o:j=o)},null,512),[[L,t(j)]])])]),e("div",oa,[e("div",aa,[m(t(ve),{as:"div",modelValue:F.value,"onUpdate:modelValue":r[13]||(r[13]=o=>F.value=o)},{default:_(()=>[m(t(pe),{class:"block text-sm font-medium text-gray-700"},{default:_(()=>[la]),_:1}),e("div",ia,[m(t(fe),{class:"w-full rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 shadow-sm focus:border-divelogBlue focus:outline-none focus:ring-1 focus:ring-divelogBlue sm:text-sm",onChange:r[12]||(r[12]=o=>ee.value=o.target.value),"display-value":o=>o==null?void 0:o.name},null,8,["display-value"]),m(t(he),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:_(()=>[m(t(_e),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1}),t(re).length>0?(v(),T(t(xe),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:_(()=>[(v(!0),$(N,null,le(t(re),o=>(v(),T(t(ye),{key:o.id,value:o,as:"template"},{default:_(({active:A,selected:P})=>[e("li",{class:U(["relative cursor-default select-none py-2 pl-3 pr-9",A?"bg-divelogBlue text-white":"text-gray-900"])},[e("span",{class:U(["block truncate",P&&"font-semibold"])},b(o.name),3),P?(v(),$("span",{key:0,class:U(["absolute inset-y-0 right-0 flex items-center pr-4",A?"text-white":"text-divelogBlue"])},[m(t(be),{class:"h-5 w-5","aria-hidden":"true"})],2)):C("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):C("",!0)])]),_:1},8,["modelValue"])])])])]),e("div",na,[ra,e("div",da,[ca,e("div",ua,[t(M)?(v(),$("div",_a,[e("div",xa,[e("img",{crossorigin:"anonymous",class:"object-scale-down h-48 w-96 mt-3",src:t(M),alt:""},null,8,ya)])])):(v(),$("div",ma,[ga,e("div",va,[e("label",pa,[fa,e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:"image/png, image/gif, image/jpeg",onChange:Oe,multiple:"true"},null,32)])]),ha]))]),t(M)?(v(),$("div",ba,[e("button",{onClick:r[14]||(r[14]=o=>E(M)?M.value=null:M=null),type:"button",class:"mt-2 inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-500 hover:bg-chsRed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-chsRed"}," Bild entfernen ")])):C("",!0)])])]),e("div",wa,[e("div",$a,[e("button",{onClick:r[15]||(r[15]=o=>t(l).push("/home")),type:"button",class:"rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-divelogBlue focus:ring-offset-2"}," Cancel "),e("button",{type:"submit",class:"ml-3 inline-flex justify-center rounded-md border border-transparent bg-divelogBlue py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg--divelogBlue focus:outline-none focus:ring-2 focus:ring-divelogBlue focus:ring-offset-2",onClick:ue}," Save ")])])])],64))}},Da={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Ba=e("div",{class:"px-4 py-5 sm:px-6"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Dive Info")],-1),Ia={class:"border-t border-gray-200"},La={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Ca=e("dt",{class:"text-sm font-medium text-gray-500"},"Dive Number",-1),Sa={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},Ea={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Oa=e("dt",{class:"text-sm font-medium text-gray-500"},"Title",-1),Aa={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},Ua={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Na=e("dt",{class:"text-sm font-medium text-gray-500"},"Date",-1),Va={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},Ra={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},ja=e("dt",{class:"text-sm font-medium text-gray-500"},"Country",-1),Ta={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},Wa={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Ma=e("dt",{class:"text-sm font-medium text-gray-500"},"Dive Site",-1),Pa={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},za=e("br",null,null,-1),Ha={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Ja=e("div",{class:"px-4 py-5 sm:px-6"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Dive Details")],-1),Fa={class:"border-t border-gray-200"},Ga={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Xa=e("dt",{class:"text-sm font-medium text-gray-500"},"Max. Depth",-1),Za={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},qa={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Ya=e("dt",{class:"text-sm font-medium text-gray-500"},"Divetime",-1),Ka={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},Qa={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},el=e("dt",{class:"text-sm font-medium text-gray-500"},"Air In",-1),tl={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},sl={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},ol=e("dt",{class:"text-sm font-medium text-gray-500"},"Air Out",-1),al={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},ll={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},il=e("dt",{class:"text-sm font-medium text-gray-500"},"Wetsuit",-1),nl={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},rl={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},dl=e("dt",{class:"text-sm font-medium text-gray-500"},"Weight",-1),cl={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},ul=e("h1",{class:"text-center text-xl my-4"},"View you Dive on the Map",-1),ml=e("div",{id:"karte",style:{height:"300px"}},null,-1),gl=e("br",null,null,-1),vl=e("hr",null,null,-1),pl=e("br",null,null,-1),fl=e("h1",{class:"text-center text-xl font-bold my-3"},"The best Image from your Dive",-1),hl=["src"],_l={props:{diveID:String},setup(D){const l=D,n=R(),i=c(!0);let a=null;const s=c();let u=c(null),d=c("pk.eyJ1IjoibHVrYXNzZW1sZXIiLCJhIjoiY2xlZTM3MzlyMDVuODN0b2NueWQ1OHNpZyJ9.NboOeOXWIhK0vucp7B9A5w"),p="mapbox://styles/lukassemler/clbaoba0t007t14nt6n0qujvl",g=c("0px");const x=async()=>{if(!i.value){let w=await a.get("dives",parseInt(l.diveID));s.value=w;return}try{const{data:w}=await z.get(`http://localhost:3000/getdiveinfo/${n.aktiverUser.u_id}/${l.diveID}`);s.value=w[0]}catch(w){console.error(w),i.value=!1,x()}},f=async()=>{a=await Q("divesDB",1,{upgrade(w){w.createObjectStore("dives",{keyPath:"d_ID"})}})};return K(async()=>{i.value=await Z(),window.addEventListener("online",()=>{i.value=!0}),window.addEventListener("offline",()=>{i.value=!1,navigator.vibrate(200)}),await f(),await x();const w=JSON.parse(s.value.coords);g.value="300px",W.accessToken=d.value,u.value=await new W.Map({container:"karte",style:p,center:[w[0],w[1]],zoom:4}),new W.Marker({anchor:"center",color:"#03C7FC"}).setLngLat([w[0],w[1]]).addTo(u.value)}),Ze(async()=>{await x()}),(w,y)=>(v(),$(N,null,[e("div",Da,[Ba,e("div",Ia,[e("dl",null,[e("div",La,[Ca,e("dd",Sa,b(s.value.nr),1)]),e("div",Ea,[Oa,e("dd",Aa,b(s.value.title),1)]),e("div",Ua,[Na,e("dd",Va,b(new Date(s.value.date).getDate())+"."+b(new Date(s.value.date).getMonth()+1)+"."+b(new Date(s.value.date).getFullYear()),1)]),e("div",Ra,[ja,e("dd",Ta,b(s.value.location),1)]),e("div",Wa,[Ma,e("dd",Pa,b(s.value.divesite),1)])])])]),za,e("div",Ha,[Ja,e("div",Fa,[e("dl",null,[e("div",Ga,[Xa,e("dd",Za,b(s.value.depth)+"m",1)]),e("div",qa,[Ya,e("dd",Ka,b(s.value.diveTime)+"min ",1)]),e("div",Qa,[el,e("dd",tl,b(s.value.airIn)+"Bar ",1)]),e("div",sl,[ol,e("dd",al,b(s.value.airOut)+"Bar ",1)]),e("div",ll,[il,e("dd",nl,b(s.value.suit),1)]),e("div",rl,[dl,e("dd",cl,b(s.value.weight)+"kg ",1)])])])]),ul,ml,gl,vl,pl,fl,e("img",{src:s.value.image,alt:""},null,8,hl)],64))}},xl=e("h1",null,"LOADING",-1),yl={setup(D){const l=J(),n=l.currentRoute.value.params.id;return(i,a)=>(v(),$(N,null,[e("button",{type:"button",class:"inline-flex items-center rounded-full border border-transparent bg-divelogBlue p-2 text-white shadow-sm hover:bg-divelogDarkBlue focus:outline-none focus:ring-2 focus:ring-divelogBlue focus:ring-offset-2 m-4",onClick:a[0]||(a[0]=s=>t(l).go(-1))},[m(t(Se),{class:"h-6 w-6","aria-hidden":"true"})]),(v(),T(Ce,null,{fallback:_(()=>[xl]),default:_(()=>[m(_l,{diveID:t(n)},null,8,["diveID"])]),_:1}))],64))}},bl=qe({history:Ye(),routes:[{path:"/",name:"Login_RegisterView",component:gt,children:[{path:"",component:Vt},{path:"register",component:_s}]},{path:"/home",name:"Home",component:po,beforeEnter:(D,l,n)=>{R().aktiverUser?n():n("/")}},{path:"/addDive",name:"Add Dive",component:ka},{path:"/diveDetail/:id",params:!0,name:"DiveDetail",component:yl,beforeEnter:(D,l,n)=>{R().aktiverUser?n():n("/")}},{path:"/:pathmatch(.*)*",name:"not-found",component:bt}]});const wl="modulepreload",$e={},$l="/",kl=function(l,n){return!n||n.length===0?l():Promise.all(n.map(i=>{if(i=`${$l}${i}`,i in $e)return;$e[i]=!0;const a=i.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":wl,a||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),a)return new Promise((d,p)=>{u.addEventListener("load",d),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>l())};function Dl(D={}){const{immediate:l=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:a,onRegisteredSW:s,onRegisterError:u}=D;let d,p,g,x;const f=async(y=!0)=>{await g,y&&(d==null||d.addEventListener("controlling",h=>{h.isUpdate&&window.location.reload()})),await(x==null?void 0:x())};async function w(){if("serviceWorker"in navigator){const{Workbox:y,messageSW:h}=await kl(()=>import("./workbox-window.prod.es5.d2780aeb.js"),[]);x=async()=>{p&&p.waiting&&await h(p.waiting,{type:"SKIP_WAITING"})},d=new y("/service-worker.js",{scope:"/",type:"classic"}),d.addEventListener("activated",k=>{k.isUpdate||i==null||i()});{const k=()=>{n==null||n()};d.addEventListener("waiting",k),d.addEventListener("externalwaiting",k)}d.register({immediate:l}).then(k=>{p=k,s?s("/service-worker.js",k):a==null||a(k)}).catch(k=>{u==null||u(k)})}}return g=w(),f}(location.origin==="http://localhost:8080"||location.origin==="http://localhost:5050")&&(z.defaults.baseURL="http://localhost:2410");const ie=Ke(mt),Bl=Qe();ie.use(Bl);Dl({onNeedRefresh(){},onOfflineReady(){}});ie.use(bl);ie.mount("#app");
